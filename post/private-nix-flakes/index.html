<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=generator content="Hugo 0.152.2"><title>Using private Nix flake inputs | Gunnar Þór Magnússon</title><link rel=canonical href=https://www.magnusson.io/post/private-nix-flakes/><link rel=stylesheet href=https://www.magnusson.io/css/base.min.c8d7b76018962ae348ca009f0c82f2ed51a7ad01f94e2091060a820b89493837.css integrity="sha256-yNe3YBiWKuNIygCfDILy7VGnrQH5TiCRBgqCC4lJODc=" crossorigin=anonymous></head><body><nav class=u-background><div class=u-wrapper><ul class=Banner><li class="Banner-item Banner-item--title"><a class="Banner-link u-clickable" href=https://www.magnusson.io/>Gunnar Þór Magnússon</a></li><li class=Banner-item><a class="Banner-link u-clickable" href=https://www.magnusson.io/about/>About</a></li><li class=Banner-item><a class="Banner-link u-clickable" href=https://www.magnusson.io/contact/>Contact</a></li><li class=Banner-item><a class="Banner-link u-clickable" href=https://www.magnusson.io/post/>Posts</a></li></ul></div></nav><main><div class=u-wrapper><div class=u-padding><article><header class=Heading><h2 class=Heading-title><a class="Heading-link u-clickable" href=https://www.magnusson.io/post/private-nix-flakes/ rel=bookmark>Using private Nix flake inputs</a></h2><time datetime=2025-10-29T11:50:50Z>29 October, 2025</time></header><div class=paragraph><p>I want to use Nix flakes for some projects at work.
Those projects live in private Gitlab repositories that I use SSH keys to access.
Furthermore, the project layout doesn’t mirror the usual GitHub <code>namespace/project</code> convention, but is something more like <code>Company/Prefix/Username/Something/project</code>.
Nix’s flake input mechanisms <strong>do not</strong> like this, and figuring out how to get them to cooperate was a bit of a romp through various abandoned forum posts.</p></div><div class=paragraph><p>The incredibly hacky solution I finally came up with was:
First use <code>git+https://gitlab.com/Company/path/to/project</code> in the <code>inputs.project.url</code> field.
Then add a</p></div><div class=listingblock><div class=content><pre class=highlight><code>[url &#34;git@gitlab.com:Company/&#34;]
  https://gitlab.com/Company/</code></pre></div></div><div class=paragraph><p>entry to my Git config file to rewrite the URL on the fly.</p></div><div class=paragraph><p>This works, seemingly because Git actually uses SSH to access the HTTPS URL?
Or it figures out that it should use SSH to access the rewritten URI?
I dunno, man.</p></div></article></div></div></main><footer class=Footer><div class=u-wrapper><div class=u-padding>Copyright :: Gunnar Þór Magnússon</div></div><script type=text/javascript src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script></footer></body></html>